version: '3'

tasks:
  01-create-namespace:
    cmds:
      - kubectl config use-context mrupgradable-octal
      - kubectl apply -f k8s/namespace/namespace.yml
  02-create-namespace-context:
    cmds:
      - kubectl config set-context mrupgradable-octal-experimental --cluster=octal --namespace=experimental --user=mrupgradable.senary
  03-change-to-namespace-context:
    cmds:
      - kubectl config get-contexts
      - kubectl config use-context mrupgradable-octal-experimental
      - kubectl config get-contexts
  04-deploy:
    cmds:
      - kubectl apply -f k8s/deployment/deployment.yml
  05-list-deployments:
    cmds:
      - kubectl get deployments
  06-scale-up:
    cmds:
      - kubectl scale deployment/nginx-deployment --replicas=10
